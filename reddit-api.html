<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script type="text/javascript">
        var r;
        var subreddits = [];
        var uniqueSubreddits = [];
        var uniqueSubredditsCount = [];
        var subredditObjects = [];
        var sortedSubredditObjects = [];
        var htmlString = "<ul>"
        $.get('https://www.reddit.com/search.json?q=Bernie+Sanders&count=1000&limit=1000').success(function(responseData){
            r=responseData.data.children;
            for(i = 0; i<r.length; i++){
                subreddits.push(r[i].data.subreddit);
            }
            uniqueSubreddits = _.uniq(subreddits);
            for(i=0;i<uniqueSubreddits.length;i++){
                uniqueSubredditsCount[i]=0;
                for(j=0;j<subreddits.length;j++){
                    if(uniqueSubreddits[i]==subreddits[j]){
                        uniqueSubredditsCount[i]++;
                    }
                } //end 'j' for loop
                subredditObjects.push({
                    name: uniqueSubreddits[i],
                    count: uniqueSubredditsCount[i]
                }); // end Object array push
            } // end 'i' for loop
            sortedSubredditObjects = _.sortBy(subredditObjects,'count').reverse();
            for(i = 0; i<sortedSubredditObjects.length; i++){
                htmlString+="<li>"+sortedSubredditObjects[i].name+": "+sortedSubredditObjects[i].count+"</li>";
            }
            htmlString+="</ul>"
        }); // end AJAX callback.
        $("div.inner").replaceWith(htmlString);
    </script>
</head>
<body>
    <div class="container">
        <div class="inner">
        </div>
    </div>
</body>
</html>